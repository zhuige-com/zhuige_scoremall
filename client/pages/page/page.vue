<template>
	<view class="content">
		<view v-if="post" class="content-wrapper">
			<mp-html :content="post.content" />
		</view>
	</view>
</template>

<script>
	/*
	 * 追格积分商城小程序
	 * 作者: 追格
	 * 文档: https://www.zhuige.com/docs/jf
	 * gitee: https://gitee.com/zhuige_com/zhuige_scoremall
	 * github: https://github.com/zhuige-com/zhuige_scoremall
	 * Copyright © 2022-2024 www.zhuige.com All rights reserved.
	 */

	import Util from '@/utils/util';
	import Api from '@/utils/api';
	import Rest from '@/utils/rest';

	export default {
		components: {
			
		},
		
		data() {
			this.page_id = '';

			return {
				post: undefined
			};
		},

		onLoad(options) {
			if (!options.page_id) {
				uni.reLaunch({
					url: '/pages/index/index'
				})
				return;
			}
			
			this.page_id = options.page_id;
			Rest.post(Api.ZG_SCOREMALL_POST_PAGE, {
				page_id: this.page_id
			}).then(res => {
				this.post = res.data;
				uni.setNavigationBarTitle({
					title: this.post.title
				})
			}, err => {
				console.log(err)
			});
		},

		onShareAppMessage() {
			return {
				title: this.post.title + '-' + getApp().globalData.appName,
				path: 'pages/page/page?page_id=' + this.page_id
			};
		},

		// #ifdef MP-WEIXIN
		onShareTimeline() {
			return {
				title: this.post.title + '-' + getApp().globalData.appName
			};
		},
		// #endif
	}
</script>

<style lang="scss">
	@import "@/style/style.scss";

	.content-wrapper {
		padding: 30rpx 40rpx;
	}

	.content-wrapper rich-text {
		line-height: 1.8rem;
		font-weight: $Q-rich-text-weight;
		min-height: 1.8rem;
		font-size: $Q-text-size;
	}

	._img {
		border-radius: $Q-radio;
	}
</style>